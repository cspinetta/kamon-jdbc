# ================================== #
# kamon JDBC reference configuration #
# ================================== #

kanela {
  show-banner = true
  log-level = "INFO"
  debug-mode=true

  modules {

    jdbc-module {
      name = "JDBC Instrumentation Module"
      instrumentations = [
        "kamon.jdbc.instrumentation.StatementInstrumentation",
        "kamon.jdbc.instrumentation.HikariInstrumentation"
      ]
      within = [
        "com.zaxxer.hikari.pool.HikariPool",
        "com.zaxxer.hikari.pool.ProxyConnection",
        "org.h2..*",
        "com.mysql.jdbc..*",
        "org.postgresql.jdbc..*",
        "org.mariadb.jdbc..*"
        "com.microsoft.sqlserver.jdbc..*",
        "oracle.jdbc..*",
        "net.sf.log4jdbc..*"
      ]
    }
    maria-jdbc-module {
      name = "Maria JDBC Instrumentation Module"
      instrumentations = [
        "kamon.jdbc.instrumentation.MariaInstrumentation",

      ]
      within = [
        "org.mariadb.jdbc..*"
      ]
    }
  }
}

kamon {
  jdbc {

    # Minimum elapsed time for a statement execution to be processed by the slow query processor
    slow-query-threshold = 2 seconds

    # FQCN of the implementation of kamon.jdbc.SlowQueryProcessor.
    slow-query-processor = "kamon.jdbc.Jdbc$SlowQueryProcessor$Default"

    # Fully qualified name of the implementation of kamon.jdbc.SqlErrorProcessor.
    sql-error-processor = "kamon.jdbc.Jdbc$SqlErrorProcessor$Default"
  }
}
